#!/usr/bin/env python3
# Looks a bit like a simplified scene from Limbo.

# NOTE:
#   Prototyping looks is *NOT* what Trabant is about.
#   Trabant is about prototyping controls and game mechanic.
#   Delete this file and forget it ever existed. Thanks.


from trabant import *
from trabant.objects import nophys


bg(col='#fff')
fg(col='#222', outline=False)
fog(200,600)
gravity((0,0,0))
cam(distance=200, pos=(0,0,-10), fov=25, light_angle=(-1.1,0,-0.5))


# City's vertices and triangles as generated by some 3D editor.
city_vertices = \
'''-95.51 -104.99 35.13 -85.11 -104.99 35.13 -74.71 -104.99 35.13 -64.31 -104.99 35.13 -53.91 -104.99 35.13 -44.74 -104.99 35.13 -95.51 -0.93 35.13 -85.11 -0.93 35.13
-74.71 -0.93 35.13 -64.31 -0.93 35.13 -53.91 -0.93 35.13 -43.51 -0.93 35.13 -93.60 0.27 35.13 -83.97 0.27 35.13 -74.33 0.27 35.13 -64.70 0.27 35.13
-55.06 0.27 35.13 -45.42 0.27 35.13 -95.51 18.02 35.13 -85.11 23.79 35.13 -77.84 18.02 35.13 -62.65 18.02 35.13 -53.91 18.02 35.13 -43.51 13.81 35.13
-95.51 18.02 -2.86 -85.11 23.79 -2.86 -77.84 18.02 -2.86 -62.65 21.12 -2.86 -53.91 18.02 -2.86 -43.51 13.81 -2.86 -93.60 0.27 -2.86 -83.97 0.27 -2.86
-74.33 0.27 -2.86 -64.70 0.27 -2.86 -55.06 0.27 -2.86 -45.42 0.27 -2.86 -95.51 -0.93 -2.86 -85.11 -0.93 -2.86 -74.71 -0.93 -2.86 -64.31 -0.93 -2.86
-53.91 -0.93 -2.86 -43.51 -0.93 -2.86 -95.51 -97.43 -2.86 -85.11 -97.43 -2.86 -74.71 -97.43 -2.86 -64.31 -97.43 -2.86 -53.91 -97.43 -2.86 -44.74 -97.43 -2.86
-62.65 24.74 35.13 -53.91 21.64 35.13 -53.91 21.64 -2.86 -62.65 24.74 -2.86 -77.84 36.94 35.13 -62.65 31.44 35.13 -62.65 31.44 -2.86 -77.84 36.94 -2.86
-95.51 50.30 35.13 -85.11 50.30 35.13 -85.11 50.30 -2.86 -95.51 50.30 -2.86 45.41 -106.54 32.87 102.50 -106.54 32.87 44.50 -9.83 32.87 102.50 -9.83 32.87
44.50 68.85 32.87 102.50 68.85 32.87 44.50 68.85 -1.12 102.50 68.85 -1.12 44.50 -9.83 -1.12 102.50 -9.83 -1.12 45.41 -106.54 -1.12 102.50 -106.54 -1.12
39.78 -9.83 -1.12 39.78 -9.83 32.87 37.38 68.85 32.87 37.38 68.85 -1.12 -59.44 -82.08 -41.63 -39.44 -82.08 -41.63 -19.44 -82.08 -41.63 0.55 -82.08 -41.63
-59.44 -40.45 -41.63 -39.44 -34.41 -41.63 -19.44 -37.40 -41.63 2.39 -49.08 -41.63 -59.44 -40.45 -100.63 -39.44 -34.41 -100.63 -19.44 -37.40 -100.63 2.39 -49.08 -100.63
-59.44 -82.08 -100.63 -39.44 -82.08 -100.63 -19.44 -82.08 -100.63 0.55 -82.08 -100.63 -164.27 -99.33 -124.25 -128.57 -99.33 -124.25 -92.87 -99.33 -124.25 -57.17 -99.33 -124.25
-164.27 48.68 -124.25 -128.57 48.68 -124.25 -92.87 48.68 -124.25 -59.64 48.68 -124.25 -164.27 48.68 -153.14 -150.29 48.68 -135.56 -71.15 48.68 -135.56 -59.64 48.68 -153.14
-164.27 48.68 -182.03 -150.29 48.68 -199.60 -71.15 48.68 -199.60 -59.64 48.68 -182.03 -164.27 48.68 -210.92 -128.57 48.68 -210.92 -92.87 48.68 -210.92 -59.64 48.68 -210.92
-164.27 -99.33 -210.92 -128.57 -99.33 -210.92 -92.87 -99.33 -210.92 -57.17 -99.33 -210.92 -164.27 -99.33 -182.03 -128.57 -99.33 -182.03 -92.87 -99.33 -182.03 -57.17 -99.33 -182.03
-164.27 -99.33 -153.14 -128.57 -99.33 -153.14 -92.87 -99.33 -153.14 -57.17 -99.33 -153.14 -150.29 108.59 -135.56 -71.15 108.59 -135.56 -71.15 108.59 -199.60 -150.29 108.59 -199.60
12.83 -82.65 -67.57 24.87 -82.65 -67.57 34.19 -82.65 -67.57 43.52 -82.65 -67.57 52.84 -82.65 -67.57 62.16 -82.65 -67.57 15.55 1.84 -67.57 24.87 1.84 -67.57
34.19 1.84 -67.57 43.52 1.84 -67.57 52.84 1.84 -67.57 62.16 1.84 -67.57 15.55 1.84 -80.69 24.87 1.84 -80.69 34.19 1.84 -80.69 43.52 1.84 -80.69
52.84 1.84 -80.69 62.16 1.84 -80.69 15.55 1.84 -93.81 24.87 1.84 -93.81 34.19 1.84 -93.81 43.52 1.84 -93.81 52.84 1.84 -93.81 62.16 1.84 -93.81
15.55 1.84 -106.92 24.87 1.84 -106.92 34.19 1.84 -106.92 43.52 1.84 -106.92 52.84 1.84 -106.92 62.16 1.84 -106.92 15.55 1.84 -120.04 24.87 1.84 -120.04
34.19 1.84 -120.04 43.52 1.84 -120.04 52.84 1.84 -120.04 62.16 1.84 -120.04 15.55 1.84 -133.15 24.87 1.84 -133.15 34.19 1.84 -133.15 43.52 1.84 -133.15
52.84 1.84 -133.15 62.16 1.84 -133.15 12.83 -82.65 -133.15 24.87 -82.65 -133.15 34.19 -82.65 -133.15 43.52 -82.65 -133.15 52.84 -82.65 -133.15 62.16 -82.65 -133.15
12.83 -82.65 -120.04 24.87 -82.65 -120.04 34.19 -82.65 -120.04 43.52 -82.65 -120.04 52.84 -82.65 -120.04 62.16 -82.65 -120.04 12.83 -82.65 -106.92 24.87 -82.65 -106.92
34.19 -82.65 -106.92 43.52 -82.65 -106.92 52.84 -82.65 -106.92 62.16 -82.65 -106.92 12.83 -82.65 -93.81 24.87 -82.65 -93.81 34.19 -82.65 -93.81 43.52 -82.65 -93.81
52.84 -82.65 -93.81 62.16 -82.65 -93.81 12.83 -82.65 -80.69 24.87 -82.65 -80.69 34.19 -82.65 -80.69 43.52 -82.65 -80.69 52.84 -82.65 -80.69 62.16 -82.65 -80.69
24.87 6.53 -106.92 34.19 6.53 -106.92 34.19 6.53 -120.04 24.87 6.53 -120.04 23.58 8.06 -105.58 35.49 8.06 -105.58 35.49 8.06 -121.38 23.58 8.06 -121.38
23.58 15.34 -105.58 35.49 15.34 -105.58 35.49 15.34 -121.38 23.58 15.34 -121.38 24.91 17.12 -107.15 34.16 17.12 -107.15 34.16 17.12 -119.80 24.91 17.12 -119.80
36.29 10.40 -83.63 41.42 10.40 -83.63 41.42 10.40 -90.86 36.29 10.40 -90.86 -13.14 -112.89 -201.00 40.50 -112.89 -201.00 -12.49 -7.20 -201.00 40.50 -7.53 -201.00
-12.49 -7.20 -260.24 40.50 -7.53 -260.24 -13.14 -112.89 -260.24 40.50 -112.89 -260.24 -4.96 -2.18 -201.00 32.97 -2.50 -201.00 32.97 -2.50 -260.24 -4.96 -2.18 -260.24
-71.90 -56.93 -278.98 -62.15 -56.93 -278.98 -52.41 -56.93 -278.98 -42.66 -56.93 -278.98 -32.91 -56.93 -278.98 -13.37 -56.93 -278.98 -71.90 -32.64 -278.98 -51.28 -7.40 -278.98
-49.12 -39.86 -278.98 -37.44 -47.65 -278.98 -30.00 -24.55 -278.98 -23.16 -44.31 -278.98 -71.90 -32.64 -313.47 -51.28 -7.40 -313.47 -49.12 -39.86 -313.47 -37.44 -47.65 -313.47
-30.00 -24.55 -313.47 -23.16 -44.31 -313.47 -71.90 -56.93 -313.47 -62.15 -56.93 -313.47 -52.41 -55.05 -313.47 -42.66 -56.93 -313.47 -32.91 -56.93 -313.47 -13.37 -56.93 -313.47
-46.46 -67.85 -347.66 8.46 -67.85 -347.66 -46.84 -18.23 -347.66 6.62 -17.85 -347.66 -46.84 -18.23 -441.65 6.62 -17.85 -441.65 -46.46 -67.85 -441.65 6.62 -67.85 -441.65
-30.17 -31.31 -66.00 -30.60 -31.31 -66.44 -31.20 -31.31 -66.60 -31.79 -31.31 -66.44 -32.22 -31.31 -66.00 -32.38 -31.31 -65.41 -32.22 -31.31 -64.82 -31.79 -31.31 -64.38
-31.20 -31.31 -64.22 -30.60 -31.31 -64.38 -30.17 -31.31 -64.82 -30.01 -31.31 -65.41 -29.21 -30.63 -66.56 -30.05 -30.63 -67.39 -31.20 -30.63 -67.70 -32.34 -30.63 -67.39
-33.18 -30.63 -66.56 -33.49 -30.63 -65.41 -33.18 -30.63 -64.27 -32.34 -30.63 -63.43 -31.20 -30.63 -63.12 -30.05 -30.63 -63.43 -29.21 -30.63 -64.27 -28.91 -30.63 -65.41
-28.39 -29.55 -67.03 -29.58 -29.55 -68.22 -31.20 -29.55 -68.65 -32.82 -29.55 -68.22 -34.00 -29.55 -67.03 -34.44 -29.55 -65.41 -34.00 -29.55 -63.79 -32.82 -29.55 -62.60
-31.20 -29.55 -62.17 -29.58 -29.55 -62.60 -28.39 -29.55 -63.79 -27.96 -29.55 -65.41 -27.76 -28.13 -67.39 -29.21 -28.13 -68.85 -31.20 -28.13 -69.38 -33.18 -28.13 -68.85
-34.63 -28.13 -67.39 -35.17 -28.13 -65.41 -34.63 -28.13 -63.43 -33.18 -28.13 -61.97 -31.20 -28.13 -61.44 -29.21 -28.13 -61.97 -27.76 -28.13 -63.43 -27.23 -28.13 -65.41
-27.36 -26.48 -67.62 -28.98 -26.48 -69.24 -31.20 -26.48 -69.84 -33.41 -26.48 -69.24 -35.03 -26.48 -67.62 -35.62 -26.48 -65.41 -35.03 -26.48 -63.20 -33.41 -26.48 -61.58
-31.20 -26.48 -60.98 -28.98 -26.48 -61.58 -27.36 -26.48 -63.20 -26.77 -26.48 -65.41 -27.23 -24.71 -67.70 -28.91 -24.71 -69.38 -31.20 -24.71 -69.99 -33.49 -24.71 -69.38
-35.17 -24.71 -67.70 -35.78 -24.71 -65.41 -35.17 -24.71 -63.12 -33.49 -24.71 -61.44 -31.20 -24.71 -60.83 -28.91 -24.71 -61.44 -27.23 -24.71 -63.12 -26.62 -24.71 -65.41
-27.36 -22.95 -67.62 -28.98 -22.95 -69.24 -31.20 -22.95 -69.84 -33.41 -22.95 -69.24 -35.03 -22.95 -67.62 -35.62 -22.95 -65.41 -35.03 -22.95 -63.20 -33.41 -22.95 -61.58
-31.20 -22.95 -60.98 -28.98 -22.95 -61.58 -27.36 -22.95 -63.20 -26.77 -22.95 -65.41 -27.76 -21.30 -67.39 -29.21 -21.30 -68.85 -31.20 -21.30 -69.38 -33.18 -21.30 -68.85
-34.63 -21.30 -67.39 -35.17 -21.30 -65.41 -34.63 -21.30 -63.43 -33.18 -21.30 -61.97 -31.20 -21.30 -61.44 -29.21 -21.30 -61.97 -27.76 -21.30 -63.43 -27.23 -21.30 -65.41
-28.39 -19.88 -67.03 -29.58 -19.88 -68.22 -31.20 -19.88 -68.65 -32.82 -19.88 -68.22 -34.00 -19.88 -67.03 -34.44 -19.88 -65.41 -34.00 -19.88 -63.79 -32.82 -19.88 -62.60
-31.20 -19.88 -62.17 -29.58 -19.88 -62.60 -28.39 -19.88 -63.79 -27.96 -19.88 -65.41 -29.21 -18.80 -66.56 -30.05 -18.80 -67.39 -31.20 -18.80 -67.70 -32.34 -18.80 -67.39
-33.18 -18.80 -66.56 -33.49 -18.80 -65.41 -33.18 -18.80 -64.27 -32.34 -18.80 -63.43 -31.20 -18.80 -63.12 -30.05 -18.80 -63.43 -29.21 -18.80 -64.27 -28.91 -18.80 -65.41
-30.17 -18.11 -66.00 -30.60 -18.11 -66.44 -31.20 -18.11 -66.60 -31.79 -18.11 -66.44 -32.22 -18.11 -66.00 -32.38 -18.11 -65.41 -32.22 -18.11 -64.82 -31.79 -18.11 -64.38
-31.20 -18.11 -64.22 -30.60 -18.11 -64.38 -30.17 -18.11 -64.82 -30.01 -18.11 -65.41 -31.20 -31.55 -65.41 -31.20 -17.88 -65.41 -29.03 -36.73 -65.37 -28.55 -36.61 -65.31
-30.67 -29.93 -65.32 -30.19 -29.81 -65.26 -30.61 -29.91 -65.82 -30.13 -29.79 -65.76 -28.97 -36.71 -65.87 -28.49 -36.60 -65.81 -34.03 -36.60 -65.31 -33.55 -36.72 -65.31
-32.35 -29.80 -65.31 -31.87 -29.92 -65.31 -32.35 -29.80 -65.81 -31.87 -29.92 -65.81 -34.03 -36.60 -65.81 -33.55 -36.72 -65.81 28.67 -70.94 -151.73 41.17 -70.94 -151.73
53.67 -70.94 -151.73 66.17 -70.94 -151.73 78.67 -70.94 -151.73 30.19 53.21 -151.73 37.07 52.20 -151.73 41.70 53.47 -151.73 46.32 53.38 -151.73 78.67 55.38 -151.73
30.19 53.21 -170.65 37.07 52.20 -170.65 41.70 53.47 -170.65 46.32 53.38 -170.65 78.67 55.38 -170.65 28.67 -70.94 -170.65 41.17 -70.94 -170.65 53.67 -70.94 -170.65
66.17 -70.94 -170.65 78.67 -70.94 -170.65 32.36 52.91 -164.02 35.36 52.91 -164.02 32.36 55.91 -164.02 35.36 55.91 -164.02 32.36 55.91 -167.02 35.36 55.91 -167.02
32.36 52.91 -167.02 35.36 52.91 -167.02 2.62 -3.28 -226.11 5.55 -2.63 -226.11 1.96 -0.35 -226.11 4.89 0.29 -226.11 1.96 -0.35 -229.11 4.89 0.29 -229.11
2.62 -3.28 -229.11 5.55 -2.63 -229.11 -34.03 -19.12 -363.89 -31.11 -18.47 -363.89 -34.69 -16.19 -363.89 -31.76 -15.54 -363.89 -34.69 -16.19 -366.89 -31.76 -15.54 -366.89
-34.03 -19.12 -366.89 -31.11 -18.47 -366.89 -28.38 -18.46 -399.86 -25.46 -19.12 -399.86 -27.73 -15.54 -399.86 -24.80 -16.20 -399.86 -27.73 -15.54 -402.86 -24.80 -16.20 -402.86
-28.38 -18.46 -402.86 -25.46 -19.12 -402.86 -16.82 -42.84 -67.14 -10.51 -43.14 -67.14 -15.40 -35.42 -67.14 -9.10 -36.84 -67.14 -15.40 -35.42 -73.60 -9.10 -36.84 -73.60
-16.82 -42.84 -73.60 -10.51 -43.14 -73.60 19.47 -8.49 -66.99 20.16 -8.49 -66.99 19.47 -7.77 -66.99 20.16 -7.77 -66.99 19.47 -4.63 -66.99 20.16 -4.63 -66.99
19.47 -3.91 -66.99 20.16 -3.91 -66.99 19.47 -3.91 -67.68 20.16 -3.91 -67.68 19.47 -4.63 -67.68 20.16 -4.63 -67.68 19.47 -7.77 -67.68 20.16 -7.77 -67.68
19.47 -8.49 -67.68 20.16 -8.49 -67.68 23.07 -8.49 -67.68 23.07 -8.49 -66.99 23.07 -7.77 -67.68 23.07 -7.77 -66.99 23.07 -4.63 -67.68 23.07 -4.63 -66.99
23.07 -3.91 -67.68 23.07 -3.91 -66.99 22.49 -7.77 -67.68 22.49 -7.77 -66.99 22.49 -4.63 -67.68 22.49 -4.63 -66.99 35.03 -10.69 -66.99 35.72 -10.69 -66.99
35.03 -9.97 -66.99 35.72 -9.97 -66.99 35.03 -6.83 -66.99 35.72 -6.83 -66.99 35.03 -6.11 -66.99 35.72 -6.11 -66.99 35.03 -6.11 -67.68 35.72 -6.11 -67.68
35.03 -6.83 -67.68 35.72 -6.83 -67.68 35.03 -9.97 -67.68 35.72 -9.97 -67.68 35.03 -10.69 -67.68 35.72 -10.69 -67.68 38.64 -10.69 -67.68 38.64 -10.69 -66.99
38.64 -9.97 -67.68 38.64 -9.97 -66.99 38.64 -6.83 -67.68 38.64 -6.83 -66.99 38.64 -6.11 -67.68 38.64 -6.11 -66.99 38.05 -9.97 -67.68 38.05 -9.97 -66.99
38.05 -6.83 -67.68 38.05 -6.83 -66.99 23.56 -21.72 -66.99 24.25 -21.72 -66.99 23.56 -21.00 -66.99 24.25 -21.00 -66.99 23.56 -17.86 -66.99 24.25 -17.86 -66.99
23.56 -17.14 -66.99 24.25 -17.14 -66.99 23.56 -17.14 -67.68 24.25 -17.14 -67.68 23.56 -17.86 -67.68 24.25 -17.86 -67.68 23.56 -21.00 -67.68 24.25 -21.00 -67.68
23.56 -21.72 -67.68 24.25 -21.72 -67.68 27.17 -21.72 -67.68 27.17 -21.72 -66.99 27.17 -21.00 -67.68 27.17 -21.00 -66.99 27.17 -17.86 -67.68 27.17 -17.86 -66.99
27.17 -17.14 -67.68 27.17 -17.14 -66.99 26.58 -21.00 -67.68 26.58 -21.00 -66.99 26.58 -17.86 -67.68 26.58 -17.86 -66.99 -66.77 5.00 -123.73 -66.08 5.00 -123.73
-66.77 5.73 -123.73 -66.08 5.73 -123.73 -66.77 8.86 -123.73 -66.08 8.86 -123.73 -66.77 9.59 -123.73 -66.08 9.59 -123.73 -66.77 9.59 -124.41 -66.08 9.59 -124.41
-66.77 8.86 -124.41 -66.08 8.86 -124.41 -66.77 5.73 -124.41 -66.08 5.73 -124.41 -66.77 5.00 -124.41 -66.08 5.00 -124.41 -63.17 5.00 -124.41 -63.17 5.00 -123.73
-63.17 5.73 -124.41 -63.17 5.73 -123.73 -63.17 8.86 -124.41 -63.17 8.86 -123.73 -63.17 9.59 -124.41 -63.17 9.59 -123.73 -63.75 5.73 -124.41 -63.75 5.73 -123.73
-63.75 8.86 -124.41 -63.75 8.86 -123.73 -68.48 21.46 -123.73 -67.79 21.46 -123.73 -68.48 22.18 -123.73 -67.79 22.18 -123.73 -68.48 25.32 -123.73 -67.79 25.32 -123.73
-68.48 26.04 -123.73 -67.79 26.04 -123.73 -68.48 26.04 -124.41 -67.79 26.04 -124.41 -68.48 25.32 -124.41 -67.79 25.32 -124.41 -68.48 22.18 -124.41 -67.79 22.18 -124.41
-68.48 21.46 -124.41 -67.79 21.46 -124.41 -64.87 21.46 -124.41 -64.87 21.46 -123.73 -64.87 22.18 -124.41 -64.87 22.18 -123.73 -64.87 25.32 -124.41 -64.87 25.32 -123.73
-64.87 26.04 -124.41 -64.87 26.04 -123.73 -65.46 22.18 -124.41 -65.46 22.18 -123.73 -65.46 25.32 -124.41 -65.46 25.32 -123.73 -68.48 37.07 -123.73 -67.79 37.07 -123.73
-68.48 37.79 -123.73 -67.79 37.79 -123.73 -68.48 40.93 -123.73 -67.79 40.93 -123.73 -68.48 41.65 -123.73 -67.79 41.65 -123.73 -68.48 41.65 -124.41 -67.79 41.65 -124.41
-68.48 40.93 -124.41 -67.79 40.93 -124.41 -68.48 37.79 -124.41 -67.79 37.79 -124.41 -68.48 37.07 -124.41 -67.79 37.07 -124.41 -64.87 37.07 -124.41 -64.87 37.07 -123.73
-64.87 37.79 -124.41 -64.87 37.79 -123.73 -64.87 40.92 -124.41 -64.87 40.92 -123.73 -64.87 41.65 -124.41 -64.87 41.65 -123.73 -65.46 37.79 -124.41 -65.46 37.79 -123.73
-65.46 40.92 -124.41 -65.46 40.92 -123.73 -76.60 37.07 -123.73 -75.92 37.07 -123.73 -76.60 37.79 -123.73 -75.92 37.79 -123.73 -76.60 40.93 -123.73 -75.92 40.93 -123.73
-76.60 41.65 -123.73 -75.92 41.65 -123.73 -76.60 41.65 -124.41 -75.92 41.65 -124.41 -76.60 40.93 -124.41 -75.92 40.93 -124.41 -76.60 37.79 -124.41 -75.92 37.79 -124.41
-76.60 37.07 -124.41 -75.92 37.07 -124.41 -73.00 37.07 -124.41 -73.00 37.07 -123.73 -73.00 37.79 -124.41 -73.00 37.79 -123.73 -73.00 40.92 -124.41 -73.00 40.92 -123.73
-73.00 41.65 -124.41 -73.00 41.65 -123.73 -73.59 37.79 -124.41 -73.59 37.79 -123.73 -73.59 40.92 -124.41 -73.59 40.92 -123.73 -76.60 57.34 -134.94 -75.92 57.34 -134.94
-76.60 58.07 -134.94 -75.92 58.07 -134.94 -76.60 61.20 -134.94 -75.92 61.20 -134.94 -76.60 61.93 -134.94 -75.92 61.93 -134.94 -76.60 61.93 -135.63 -75.92 61.93 -135.63
-76.60 61.20 -135.63 -75.92 61.20 -135.63 -76.60 58.07 -135.63 -75.92 58.07 -135.63 -76.60 57.34 -135.63 -75.92 57.34 -135.63 -73.00 57.34 -135.63 -73.00 57.34 -134.94
-73.00 58.07 -135.63 -73.00 58.07 -134.94 -73.00 61.20 -135.63 -73.00 61.20 -134.94 -73.00 61.93 -135.63 -73.00 61.93 -134.94 -73.59 58.07 -135.63 -73.59 58.07 -134.94
-73.59 61.20 -135.63 -73.59 61.20 -134.94 40.23 25.90 -151.17 40.92 25.90 -151.17 40.23 26.62 -151.17 40.92 26.62 -151.17 40.23 29.76 -151.17 40.92 29.76 -151.17
40.23 30.48 -151.17 40.92 30.48 -151.17 40.23 30.48 -151.86 40.92 30.48 -151.86 40.23 29.76 -151.86 40.92 29.76 -151.86 40.23 26.62 -151.86 40.92 26.62 -151.86
40.23 25.90 -151.86 40.92 25.90 -151.86 43.84 25.90 -151.86 43.84 25.90 -151.17 43.84 26.62 -151.86 43.84 26.62 -151.17 43.84 29.76 -151.86 43.84 29.76 -151.17
43.84 30.48 -151.86 43.84 30.48 -151.17 43.25 26.62 -151.86 43.25 26.62 -151.17 43.25 29.76 -151.86 43.25 29.76 -151.17 36.62 40.17 -151.17 37.31 40.17 -151.17
36.62 40.89 -151.17 37.31 40.89 -151.17 36.62 44.03 -151.17 37.31 44.03 -151.17 36.62 44.75 -151.17 37.31 44.75 -151.17 36.62 44.75 -151.86 37.31 44.75 -151.86
36.62 44.03 -151.86 37.31 44.03 -151.86 36.62 40.89 -151.86 37.31 40.89 -151.86 36.62 40.17 -151.86 37.31 40.17 -151.86 40.23 40.17 -151.86 40.23 40.17 -151.17
40.23 40.89 -151.86 40.23 40.89 -151.17 40.23 44.03 -151.86 40.23 44.03 -151.17 40.23 44.75 -151.86 40.23 44.75 -151.17 39.64 40.89 -151.86 39.64 40.89 -151.17
39.64 44.03 -151.86 39.64 44.03 -151.17 -1.77 -14.54 -200.42 -1.08 -14.54 -200.42 -1.77 -13.82 -200.42 -1.08 -13.82 -200.42 -1.77 -10.68 -200.42 -1.08 -10.68 -200.42
-1.77 -9.96 -200.42 -1.08 -9.96 -200.42 -1.77 -9.96 -201.10 -1.08 -9.96 -201.10 -1.77 -10.68 -201.10 -1.08 -10.68 -201.10 -1.77 -13.82 -201.10 -1.08 -13.82 -201.10
-1.77 -14.54 -201.10 -1.08 -14.54 -201.10 1.82 -14.54 -201.10 1.82 -14.54 -200.42 1.82 -13.82 -201.10 1.82 -13.82 -200.42 1.82 -10.68 -201.10 1.82 -10.68 -200.42
1.82 -9.96 -201.10 1.82 -9.96 -200.42 1.24 -13.82 -201.10 1.24 -13.82 -200.42 1.24 -10.68 -201.10 1.24 -10.68 -200.42 11.72 -13.31 -200.42 12.41 -13.31 -200.42
11.72 -12.58 -200.42 12.41 -12.58 -200.42 11.72 -9.45 -200.42 12.41 -9.45 -200.42 11.72 -8.72 -200.42 12.41 -8.72 -200.42 11.72 -8.72 -201.10 12.41 -8.72 -201.10
11.72 -9.45 -201.10 12.41 -9.45 -201.10 11.72 -12.58 -201.10 12.41 -12.58 -201.10 11.72 -13.31 -201.10 12.41 -13.31 -201.10 15.32 -13.31 -201.10 15.32 -13.31 -200.42
15.32 -12.58 -201.10 15.32 -12.58 -200.42 15.32 -9.45 -201.10 15.32 -9.45 -200.42 15.32 -8.72 -201.10 15.32 -8.72 -200.42 14.74 -12.58 -201.10 14.74 -12.58 -200.42
14.74 -9.45 -201.10 14.74 -9.45 -200.42 -23.93 -25.19 -347.12 -23.24 -25.19 -347.12 -23.93 -24.47 -347.12 -23.24 -24.47 -347.12 -23.93 -21.33 -347.12 -23.24 -21.33 -347.12
-23.93 -20.61 -347.12 -23.24 -20.61 -347.12 -23.93 -20.61 -347.81 -23.24 -20.61 -347.81 -23.93 -21.33 -347.81 -23.24 -21.33 -347.81 -23.93 -24.47 -347.81 -23.24 -24.47 -347.81
-23.93 -25.19 -347.81 -23.24 -25.19 -347.81 -20.32 -25.19 -347.81 -20.32 -25.19 -347.12 -20.32 -24.47 -347.81 -20.32 -24.47 -347.12 -20.32 -21.34 -347.81 -20.32 -21.34 -347.12
-20.32 -20.61 -347.81 -20.32 -20.61 -347.12 -20.91 -24.47 -347.81 -20.91 -24.47 -347.12 -20.91 -21.34 -347.81 -20.91 -21.34 -347.12 -39.35 -28.19 -347.12 -38.66 -28.19 -347.12
-39.35 -27.47 -347.12 -38.66 -27.47 -347.12 -39.35 -24.33 -347.12 -38.66 -24.33 -347.12 -39.35 -23.61 -347.12 -38.66 -23.61 -347.12 -39.35 -23.61 -347.81 -38.66 -23.61 -347.81
-39.35 -24.33 -347.81 -38.66 -24.33 -347.81 -39.35 -27.47 -347.81 -38.66 -27.47 -347.81 -39.35 -28.19 -347.81 -38.66 -28.19 -347.81 -35.74 -28.19 -347.81 -35.74 -28.19 -347.12
-35.74 -27.47 -347.81 -35.74 -27.47 -347.12 -35.74 -24.33 -347.81 -35.74 -24.33 -347.12 -35.74 -23.61 -347.81 -35.74 -23.61 -347.12 -36.33 -27.47 -347.81 -36.33 -27.47 -347.12
-36.33 -24.33 -347.81 -36.33 -24.33 -347.12 45.0 -11.30 17.14 45.0 -11.48 16.96 45.0 -11.73 16.89 45.0 -11.98 16.96 45.0 -12.16 17.14 45.0 -12.23 17.39
45.0 -12.16 17.64 45.0 -11.98 17.82 45.0 -11.73 17.89 45.0 -11.48 17.82 45.0 -11.30 17.64 45.0 -11.23 17.39 36.0 -11.80 17.14 36.0 -11.98 16.96
36.0 -12.23 16.89 36.0 -12.48 16.96 36.0 -12.67 17.14 36.0 -12.73 17.39 36.0 -12.67 17.64 36.0 -12.48 17.82 36.0 -12.23 17.89 36.0 -11.98 17.82
36.0 -11.80 17.64 36.0 -11.73 17.39 27.0 -12.16 17.14 27.0 -12.34 16.96 27.0 -12.59 16.89 27.0 -12.84 16.96 27.0 -13.02 17.14 27.0 -13.09 17.39
27.0 -13.02 17.64 27.0 -12.84 17.82 27.0 -12.59 17.89 27.0 -12.34 17.82 27.0 -12.16 17.64 27.0 -12.09 17.39 18.0 -12.43 17.14 18.0 -12.61 16.96
18.0 -12.86 16.89 18.0 -13.11 16.96 18.0 -13.29 17.14 18.0 -13.36 17.39 18.0 -13.29 17.64 18.0 -13.11 17.82 18.0 -12.86 17.89 18.0 -12.61 17.82
18.0 -12.43 17.64 18.0 -12.36 17.39 9.0 -12.60 17.14 9.0 -12.79 16.96 9.0 -13.04 16.89 9.0 -13.29 16.96 9.0 -13.47 17.14 9.0 -13.54 17.39
9.0 -13.47 17.64 9.0 -13.29 17.82 9.0 -13.04 17.89 9.0 -12.79 17.82 9.0 -12.60 17.64 9.0 -12.54 17.39 9.61e-17 -12.69 17.14 5.55e-17 -12.87 16.96
0.0 -13.12 16.89 -5.55e-17 -13.37 16.96 -9.61e-17 -13.55 17.14 -1.11e-16 -13.62 17.39 -9.61e-17 -13.55 17.64 -5.55e-17 -13.37 17.82 0.0 -13.12 17.89 5.55e-17 -12.87 17.82
9.61e-17 -12.69 17.64 1.11e-16 -12.62 17.39 -9.0 -12.60 17.14 -9.0 -12.79 16.96 -9.0 -13.04 16.89 -9.0 -13.29 16.96 -9.0 -13.47 17.14 -9.0 -13.54 17.39
-9.0 -13.47 17.64 -9.0 -13.29 17.82 -9.0 -13.04 17.89 -9.0 -12.79 17.82 -9.0 -12.60 17.64 -9.0 -12.54 17.39 -18.0 -12.43 17.14 -18.0 -12.61 16.96
-18.0 -12.86 16.89 -18.0 -13.11 16.96 -18.0 -13.29 17.14 -18.0 -13.36 17.39 -18.0 -13.29 17.64 -18.0 -13.11 17.82 -18.0 -12.86 17.89 -18.0 -12.61 17.82
-18.0 -12.43 17.64 -18.0 -12.36 17.39 -27.0 -12.16 17.14 -27.0 -12.34 16.96 -27.0 -12.59 16.89 -27.0 -12.84 16.96 -27.0 -13.02 17.14 -27.0 -13.09 17.39
-27.0 -13.02 17.64 -27.0 -12.84 17.82 -27.0 -12.59 17.89 -27.0 -12.34 17.82 -27.0 -12.16 17.64 -27.0 -12.09 17.39 -36.0 -11.80 17.14 -36.0 -11.98 16.96
-36.0 -12.23 16.89 -36.0 -12.48 16.96 -36.0 -12.67 17.14 -36.0 -12.73 17.39 -36.0 -12.67 17.64 -36.0 -12.48 17.82 -36.0 -12.23 17.89 -36.0 -11.98 17.82
-36.0 -11.80 17.64 -36.0 -11.73 17.39 -45.0 -11.30 17.14 -45.0 -11.48 16.96 -45.0 -11.73 16.89 -45.0 -11.98 16.96 -45.0 -12.16 17.14 -45.0 -12.23 17.39
-45.0 -12.16 17.64 -45.0 -11.98 17.82 -45.0 -11.73 17.89 -45.0 -11.48 17.82 -45.0 -11.30 17.64 -45.0 -11.23 17.39 45.0 -11.73 17.39 -45.0 -11.73 17.39'''
ci = iter(float(f) for f in city_vertices.split())
city_vertices = [vec3(x,-z,y) for x,y,z in zip(ci,ci,ci)]
city_triangles = \
'''0 1 6 6 1 7 1 2 7 7 2 8 2 3 8 8 3 9 3 4 9 9 4 10
4 5 10 10 5 11 6 7 12 12 7 13 7 8 13 13 8 14 8 9 14 14 9 15
10 16 9 9 16 15 11 17 10 10 17 16 12 13 18 18 13 19 14 20 13 13 20 19
15 21 14 14 21 20 15 16 21 21 16 22 17 23 16 16 23 22 56 57 59 59 57 58
19 20 25 25 20 26 52 53 55 55 53 54 48 49 51 51 49 50 22 23 28 28 23 29
25 31 24 24 31 30 25 26 31 31 26 32 27 33 26 26 33 32 27 28 33 33 28 34
28 29 34 34 29 35 31 37 30 30 37 36 32 38 31 31 38 37 32 33 38 38 33 39
33 34 39 39 34 40 34 35 40 40 35 41 36 37 42 42 37 43 37 38 43 43 38 44
38 39 44 44 39 45 39 40 45 45 40 46 40 41 46 46 41 47 42 43 0 0 43 1
43 44 1 1 44 2 44 45 2 2 45 3 45 46 3 3 46 4 46 47 4 4 47 5
5 47 11 11 47 41 11 41 17 17 41 35 17 35 23 23 35 29 0 6 42 42 6 36
36 6 30 30 6 12 30 12 24 24 12 18 22 49 21 21 49 48 22 28 49 49 28 50
28 27 50 50 27 51 21 48 27 27 48 51 21 53 20 20 53 52 21 27 53 53 27 54
27 26 54 54 26 55 26 20 55 55 20 52 18 19 56 56 19 57 19 25 57 57 25 58
24 59 25 25 59 58 24 18 59 59 18 56 60 61 62 62 61 63 62 63 64 64 63 65
64 65 66 66 65 67 66 67 68 68 67 69 68 69 70 70 69 71 70 71 60 60 71 61
61 71 63 63 71 69 63 69 65 65 69 67 70 60 68 68 60 62 72 73 75 75 73 74
68 62 72 72 62 73 62 64 73 73 64 74 64 66 74 74 66 75 66 68 75 75 68 72
76 77 80 80 77 81 77 78 81 81 78 82 79 83 78 78 83 82 80 81 84 84 81 85
81 82 85 85 82 86 82 83 86 86 83 87 85 89 84 84 89 88 85 86 89 89 86 90
86 87 90 90 87 91 88 89 76 76 89 77 89 90 77 77 90 78 90 91 78 78 91 79
79 91 83 83 91 87 88 76 84 84 76 80 92 93 96 96 93 97 93 94 97 97 94 98
94 95 98 98 95 99 97 101 96 96 101 100 97 98 101 101 98 102 98 99 102 102 99 103
100 101 104 104 101 105 124 125 127 127 125 126 102 103 106 106 103 107 104 105 108 108 105 109
105 106 109 109 106 110 107 111 106 106 111 110 108 109 112 112 109 113 109 110 113 113 110 114
110 111 114 114 111 115 112 113 116 116 113 117 113 114 117 117 114 118 114 115 118 118 115 119
116 117 120 120 117 121 117 118 121 121 118 122 118 119 122 122 119 123 120 121 92 92 121 93
121 122 93 93 122 94 122 123 94 94 123 95 119 115 107 107 115 111 123 119 103 103 119 107
95 123 99 99 123 103 112 116 108 108 116 104 116 120 104 104 120 100 120 92 100 100 92 96
101 102 124 124 102 125 102 106 125 125 106 126 106 105 126 126 105 127 105 101 127 127 101 124
128 129 134 134 129 135 129 130 135 135 130 136 130 131 136 136 131 137 131 132 137 137 132 138
132 133 138 138 133 139 134 135 140 140 135 141 135 136 141 141 136 142 136 137 142 142 137 143
137 138 143 143 138 144 138 139 144 144 139 145 140 141 146 146 141 147 141 142 147 147 142 148
216 217 219 219 217 218 143 144 149 149 144 150 144 145 150 150 145 151 146 147 152 152 147 153
147 148 153 153 148 154 148 149 154 154 149 155 149 150 155 155 150 156 150 151 156 156 151 157
152 153 158 158 153 159 212 213 215 215 213 214 154 155 160 160 155 161 155 156 161 161 156 162
156 157 162 162 157 163 158 159 164 164 159 165 159 160 165 165 160 166 160 161 166 166 161 167
161 162 167 167 162 168 162 163 168 168 163 169 164 165 170 170 165 171 165 166 171 171 166 172
166 167 172 172 167 173 167 168 173 173 168 174 168 169 174 174 169 175 170 171 176 176 171 177
171 172 177 177 172 178 172 173 178 178 173 179 173 174 179 179 174 180 174 175 180 180 175 181
176 177 182 182 177 183 177 178 183 183 178 184 178 179 184 184 179 185 179 180 185 185 180 186
180 181 186 186 181 187 182 183 188 188 183 189 183 184 189 189 184 190 184 185 190 190 185 191
185 186 191 191 186 192 186 187 192 192 187 193 188 189 194 194 189 195 189 190 195 195 190 196
190 191 196 196 191 197 191 192 197 197 192 198 192 193 198 198 193 199 194 195 128 128 195 129
195 196 129 129 196 130 196 197 130 130 197 131 197 198 131 131 198 132 198 199 132 132 199 133
181 175 163 163 175 169 187 181 157 157 181 163 193 187 151 151 187 157 199 193 145 145 193 151
133 199 139 139 199 145 170 176 164 164 176 158 176 182 158 158 182 152 182 188 152 152 188 146
188 194 146 146 194 140 194 128 140 140 128 134 153 154 200 200 154 201 154 160 201 201 160 202
160 159 202 202 159 203 159 153 203 203 153 200 200 201 204 204 201 205 201 202 205 205 202 206
202 203 206 206 203 207 203 200 207 207 200 204 204 205 208 208 205 209 205 206 209 209 206 210
206 207 210 210 207 211 207 204 211 211 204 208 208 209 212 212 209 213 209 210 213 213 210 214
210 211 214 214 211 215 211 208 215 215 208 212 142 143 216 216 143 217 143 149 217 217 149 218
149 148 218 218 148 219 148 142 219 219 142 216 220 221 222 222 221 223 228 229 231 231 229 230
224 225 226 226 225 227 226 227 220 220 227 221 221 227 223 223 227 225 226 220 224 224 220 222
222 223 228 228 223 229 223 225 229 229 225 230 225 224 230 230 224 231 224 222 231 231 222 228
232 233 238 238 233 239 234 240 233 233 240 239 235 241 234 234 241 240 235 236 241 241 236 242
237 243 236 236 243 242 238 239 244 244 239 245 239 240 245 245 240 246 240 241 246 246 241 247
241 242 247 247 242 248 242 243 248 248 243 249 245 251 244 244 251 250 245 246 251 251 246 252
246 247 252 252 247 253 248 254 247 247 254 253 248 249 254 254 249 255 250 251 232 232 251 233
251 252 233 233 252 234 252 253 234 234 253 235 253 254 235 235 254 236 254 255 236 236 255 237
237 255 243 243 255 249 250 232 244 244 232 238 256 257 258 258 257 259 258 259 260 260 259 261
260 261 262 262 261 263 262 263 256 256 263 257 257 263 259 259 263 261 262 256 260 260 256 258
264 265 276 276 265 277 265 266 277 277 266 278 266 267 278 278 267 279 267 268 279 279 268 280
268 269 280 280 269 281 269 270 281 281 270 282 270 271 282 282 271 283 271 272 283 283 272 284
272 273 284 284 273 285 273 274 285 285 274 286 274 275 286 286 275 287 275 264 287 287 264 276
276 277 288 288 277 289 277 278 289 289 278 290 278 279 290 290 279 291 279 280 291 291 280 292
280 281 292 292 281 293 281 282 293 293 282 294 282 283 294 294 283 295 283 284 295 295 284 296
284 285 296 296 285 297 285 286 297 297 286 298 286 287 298 298 287 299 287 276 299 299 276 288
288 289 300 300 289 301 289 290 301 301 290 302 290 291 302 302 291 303 291 292 303 303 292 304
292 293 304 304 293 305 293 294 305 305 294 306 294 295 306 306 295 307 295 296 307 307 296 308
296 297 308 308 297 309 297 298 309 309 298 310 298 299 310 310 299 311 299 288 311 311 288 300
300 301 312 312 301 313 301 302 313 313 302 314 302 303 314 314 303 315 303 304 315 315 304 316
304 305 316 316 305 317 305 306 317 317 306 318 306 307 318 318 307 319 307 308 319 319 308 320
308 309 320 320 309 321 309 310 321 321 310 322 310 311 322 322 311 323 311 300 323 323 300 312
312 313 324 324 313 325 313 314 325 325 314 326 314 315 326 326 315 327 315 316 327 327 316 328
316 317 328 328 317 329 317 318 329 329 318 330 318 319 330 330 319 331 319 320 331 331 320 332
320 321 332 332 321 333 321 322 333 333 322 334 322 323 334 334 323 335 323 312 335 335 312 324
324 325 336 336 325 337 325 326 337 337 326 338 326 327 338 338 327 339 327 328 339 339 328 340
328 329 340 340 329 341 329 330 341 341 330 342 330 331 342 342 331 343 331 332 343 343 332 344
332 333 344 344 333 345 333 334 345 345 334 346 334 335 346 346 335 347 335 324 347 347 324 336
336 337 348 348 337 349 337 338 349 349 338 350 338 339 350 350 339 351 339 340 351 351 340 352
340 341 352 352 341 353 341 342 353 353 342 354 342 343 354 354 343 355 343 344 355 355 344 356
344 345 356 356 345 357 345 346 357 357 346 358 346 347 358 358 347 359 347 336 359 359 336 348
348 349 360 360 349 361 349 350 361 361 350 362 350 351 362 362 351 363 351 352 363 363 352 364
352 353 364 364 353 365 353 354 365 365 354 366 354 355 366 366 355 367 355 356 367 367 356 368
356 357 368 368 357 369 357 358 369 369 358 370 358 359 370 370 359 371 359 348 371 371 348 360
360 361 372 372 361 373 361 362 373 373 362 374 362 363 374 374 363 375 363 364 375 375 364 376
364 365 376 376 365 377 365 366 377 377 366 378 366 367 378 378 367 379 367 368 379 379 368 380
368 369 380 380 369 381 369 370 381 381 370 382 370 371 382 382 371 383 371 360 383 383 360 372
372 373 384 384 373 385 373 374 385 385 374 386 374 375 386 386 375 387 375 376 387 387 376 388
376 377 388 388 377 389 377 378 389 389 378 390 378 379 390 390 379 391 379 380 391 391 380 392
380 381 392 392 381 393 381 382 393 393 382 394 382 383 394 394 383 395 383 372 395 395 372 384
265 264 396 266 265 396 267 266 396 268 267 396 269 268 396 270 269 396 271 270 396 272 271 396
273 272 396 274 273 396 275 274 396 264 275 396 384 385 397 385 386 397 386 387 397 387 388 397
388 389 397 389 390 397 390 391 397 391 392 397 392 393 397 393 394 397 394 395 397 395 384 397
398 399 400 400 399 401 400 401 402 402 401 403 402 403 404 404 403 405 404 405 398 398 405 399
399 405 401 401 405 403 404 398 402 402 398 400 406 407 408 408 407 409 408 409 410 410 409 411
410 411 412 412 411 413 412 413 406 406 413 407 407 413 409 409 413 411 412 406 410 410 406 408
415 420 414 414 420 419 415 416 420 420 416 421 417 422 416 416 422 421 418 423 417 417 423 422
419 420 424 424 420 425 420 421 425 425 421 426 421 422 426 426 422 427 422 423 427 427 423 428
424 425 429 429 425 430 426 431 425 425 431 430 426 427 431 431 427 432 427 428 432 432 428 433
429 430 414 414 430 415 430 431 415 415 431 416 431 432 416 416 432 417 432 433 417 417 433 418
418 433 423 423 433 428 429 414 424 424 414 419 434 435 436 436 435 437 436 437 438 438 437 439
438 439 440 440 439 441 440 441 434 434 441 435 435 441 437 437 441 439 440 434 438 438 434 436
442 443 444 444 443 445 444 445 446 446 445 447 446 447 448 448 447 449 448 449 442 442 449 443
443 449 445 445 449 447 448 442 446 446 442 444 450 451 452 452 451 453 452 453 454 454 453 455
454 455 456 456 455 457 456 457 450 450 457 451 451 457 453 453 457 455 456 450 454 454 450 452
458 459 460 460 459 461 460 461 462 462 461 463 462 463 464 464 463 465 464 465 458 458 465 459
459 465 461 461 465 463 464 458 462 462 458 460 466 467 468 468 467 469 468 469 470 470 469 471
470 471 472 472 471 473 472 473 466 466 473 467 467 473 469 469 473 471 472 466 470 470 466 468
476 474 477 474 475 477 477 475 499 491 493 475 475 493 499 476 477 478 478 477 479 480 478 481
478 479 481 481 479 497 495 497 501 479 501 497 482 480 483 480 481 483 483 481 496 481 497 496
484 482 485 482 483 485 483 496 485 494 500 496 485 496 500 484 485 486 486 485 487 488 486 489
486 487 489 489 487 490 492 490 498 487 498 490 488 489 474 474 489 475 491 490 493 493 490 492
477 487 479 479 487 485 488 474 486 486 474 476 486 476 484 484 476 478 484 478 482 482 478 480
475 489 491 491 489 490 487 477 498 498 477 499 501 479 500 500 479 485 498 499 500 500 499 501
499 493 501 501 493 495 493 492 495 492 494 495 495 494 497 494 496 497 492 498 494 494 498 500
504 502 505 502 503 505 505 503 527 519 521 503 503 521 527 504 505 506 506 505 507 508 506 509
506 507 509 509 507 525 523 525 529 507 529 525 510 508 511 508 509 511 511 509 524 509 525 524
512 510 513 510 511 513 511 524 513 522 528 524 513 524 528 512 513 514 514 513 515 516 514 517
514 515 517 517 515 518 520 518 526 515 526 518 516 517 502 502 517 503 519 518 521 521 518 520
505 515 507 507 515 513 516 502 514 514 502 504 514 504 512 512 504 506 512 506 510 510 506 508
503 517 519 519 517 518 515 505 526 526 505 527 529 507 528 528 507 513 526 527 528 528 527 529
527 521 529 529 521 523 521 520 523 520 522 523 523 522 525 522 524 525 520 526 522 522 526 528
532 530 533 530 531 533 533 531 555 547 549 531 531 549 555 532 533 534 534 533 535 536 534 537
534 535 537 537 535 553 551 553 557 535 557 553 538 536 539 536 537 539 539 537 552 537 553 552
540 538 541 538 539 541 539 552 541 550 556 552 541 552 556 540 541 542 542 541 543 544 542 545
542 543 545 545 543 546 548 546 554 543 554 546 544 545 530 530 545 531 547 546 549 549 546 548
533 543 535 535 543 541 544 530 542 542 530 532 542 532 540 540 532 534 540 534 538 538 534 536
531 545 547 547 545 546 543 533 554 554 533 555 557 535 556 556 535 541 554 555 556 556 555 557
555 549 557 557 549 551 549 548 551 548 550 551 551 550 553 550 552 553 548 554 550 550 554 556
560 558 561 558 559 561 561 559 583 575 577 559 559 577 583 560 561 562 562 561 563 564 562 565
562 563 565 565 563 581 579 581 585 563 585 581 566 564 567 564 565 567 567 565 580 565 581 580
568 566 569 566 567 569 567 580 569 578 584 580 569 580 584 568 569 570 570 569 571 572 570 573
570 571 573 573 571 574 576 574 582 571 582 574 572 573 558 558 573 559 575 574 577 577 574 576
561 571 563 563 571 569 572 558 570 570 558 560 570 560 568 568 560 562 568 562 566 566 562 564
559 573 575 575 573 574 571 561 582 582 561 583 585 563 584 584 563 569 582 583 584 584 583 585
583 577 585 585 577 579 577 576 579 576 578 579 579 578 581 578 580 581 576 582 578 578 582 584
588 586 589 586 587 589 589 587 611 603 605 587 587 605 611 588 589 590 590 589 591 592 590 593
590 591 593 593 591 609 607 609 613 591 613 609 594 592 595 592 593 595 595 593 608 593 609 608
596 594 597 594 595 597 595 608 597 606 612 608 597 608 612 596 597 598 598 597 599 600 598 601
598 599 601 601 599 602 604 602 610 599 610 602 600 601 586 586 601 587 603 602 605 605 602 604
589 599 591 591 599 597 600 586 598 598 586 588 598 588 596 596 588 590 596 590 594 594 590 592
587 601 603 603 601 602 599 589 610 610 589 611 613 591 612 612 591 597 610 611 612 612 611 613
611 605 613 613 605 607 605 604 607 604 606 607 607 606 609 606 608 609 604 610 606 606 610 612
616 614 617 614 615 617 617 615 639 631 633 615 615 633 639 616 617 618 618 617 619 620 618 621
618 619 621 621 619 637 635 637 641 619 641 637 622 620 623 620 621 623 623 621 636 621 637 636
624 622 625 622 623 625 623 636 625 634 640 636 625 636 640 624 625 626 626 625 627 628 626 629
626 627 629 629 627 630 632 630 638 627 638 630 628 629 614 614 629 615 631 630 633 633 630 632
617 627 619 619 627 625 628 614 626 626 614 616 626 616 624 624 616 618 624 618 622 622 618 620
615 629 631 631 629 630 627 617 638 638 617 639 641 619 640 640 619 625 638 639 640 640 639 641
639 633 641 641 633 635 633 632 635 632 634 635 635 634 637 634 636 637 632 638 634 634 638 640
644 642 645 642 643 645 645 643 667 659 661 643 643 661 667 644 645 646 646 645 647 648 646 649
646 647 649 649 647 665 663 665 669 647 669 665 650 648 651 648 649 651 651 649 664 649 665 664
652 650 653 650 651 653 651 664 653 662 668 664 653 664 668 652 653 654 654 653 655 656 654 657
654 655 657 657 655 658 660 658 666 655 666 658 656 657 642 642 657 643 659 658 661 661 658 660
645 655 647 647 655 653 656 642 654 654 642 644 654 644 652 652 644 646 652 646 650 650 646 648
643 657 659 659 657 658 655 645 666 666 645 667 669 647 668 668 647 653 666 667 668 668 667 669
667 661 669 669 661 663 661 660 663 660 662 663 663 662 665 662 664 665 660 666 662 662 666 668
672 670 673 670 671 673 673 671 695 687 689 671 671 689 695 672 673 674 674 673 675 676 674 677
674 675 677 677 675 693 691 693 697 675 697 693 678 676 679 676 677 679 679 677 692 677 693 692
680 678 681 678 679 681 679 692 681 690 696 692 681 692 696 680 681 682 682 681 683 684 682 685
682 683 685 685 683 686 688 686 694 683 694 686 684 685 670 670 685 671 687 686 689 689 686 688
673 683 675 675 683 681 684 670 682 682 670 672 682 672 680 680 672 674 680 674 678 678 674 676
671 685 687 687 685 686 683 673 694 694 673 695 697 675 696 696 675 681 694 695 696 696 695 697
695 689 697 697 689 691 689 688 691 688 690 691 691 690 693 690 692 693 688 694 690 690 694 696
700 698 701 698 699 701 701 699 723 715 717 699 699 717 723 700 701 702 702 701 703 704 702 705
702 703 705 705 703 721 719 721 725 703 725 721 706 704 707 704 705 707 707 705 720 705 721 720
708 706 709 706 707 709 707 720 709 718 724 720 709 720 724 708 709 710 710 709 711 712 710 713
710 711 713 713 711 714 716 714 722 711 722 714 712 713 698 698 713 699 715 714 717 717 714 716
701 711 703 703 711 709 712 698 710 710 698 700 710 700 708 708 700 702 708 702 706 706 702 704
699 713 715 715 713 714 711 701 722 722 701 723 725 703 724 724 703 709 722 723 724 724 723 725
723 717 725 725 717 719 717 716 719 716 718 719 719 718 721 718 720 721 716 722 718 718 722 724
728 726 729 726 727 729 729 727 751 743 745 727 727 745 751 728 729 730 730 729 731 732 730 733
730 731 733 733 731 749 747 749 753 731 753 749 734 732 735 732 733 735 735 733 748 733 749 748
736 734 737 734 735 737 735 748 737 746 752 748 737 748 752 736 737 738 738 737 739 740 738 741
738 739 741 741 739 742 744 742 750 739 750 742 740 741 726 726 741 727 743 742 745 745 742 744
729 739 731 731 739 737 740 726 738 738 726 728 738 728 736 736 728 730 736 730 734 734 730 732
727 741 743 743 741 742 739 729 750 750 729 751 753 731 752 752 731 737 750 751 752 752 751 753
751 745 753 753 745 747 745 744 747 744 746 747 747 746 749 746 748 749 744 750 746 746 750 752
756 754 757 754 755 757 757 755 779 771 773 755 755 773 779 756 757 758 758 757 759 760 758 761
758 759 761 761 759 777 775 777 781 759 781 777 762 760 763 760 761 763 763 761 776 761 777 776
764 762 765 762 763 765 763 776 765 774 780 776 765 776 780 764 765 766 766 765 767 768 766 769
766 767 769 769 767 770 772 770 778 767 778 770 768 769 754 754 769 755 771 770 773 773 770 772
757 767 759 759 767 765 768 754 766 766 754 756 766 756 764 764 756 758 764 758 762 762 758 760
755 769 771 771 769 770 767 757 778 778 757 779 781 759 780 780 759 765 778 779 780 780 779 781
779 773 781 781 773 775 773 772 775 772 774 775 775 774 777 774 776 777 772 778 774 774 778 780
784 782 785 782 783 785 785 783 807 799 801 783 783 801 807 784 785 786 786 785 787 788 786 789
786 787 789 789 787 805 803 805 809 787 809 805 790 788 791 788 789 791 791 789 804 789 805 804
792 790 793 790 791 793 791 804 793 802 808 804 793 804 808 792 793 794 794 793 795 796 794 797
794 795 797 797 795 798 800 798 806 795 806 798 796 797 782 782 797 783 799 798 801 801 798 800
785 795 787 787 795 793 796 782 794 794 782 784 794 784 792 792 784 786 792 786 790 790 786 788
783 797 799 799 797 798 795 785 806 806 785 807 809 787 808 808 787 793 806 807 808 808 807 809
807 801 809 809 801 803 801 800 803 800 802 803 803 802 805 802 804 805 800 806 802 802 806 808
812 810 813 810 811 813 813 811 835 827 829 811 811 829 835 812 813 814 814 813 815 816 814 817
814 815 817 817 815 833 831 833 837 815 837 833 818 816 819 816 817 819 819 817 832 817 833 832
820 818 821 818 819 821 819 832 821 830 836 832 821 832 836 820 821 822 822 821 823 824 822 825
822 823 825 825 823 826 828 826 834 823 834 826 824 825 810 810 825 811 827 826 829 829 826 828
813 823 815 815 823 821 824 810 822 822 810 812 822 812 820 820 812 814 820 814 818 818 814 816
811 825 827 827 825 826 823 813 834 834 813 835 837 815 836 836 815 821 834 835 836 836 835 837
835 829 837 837 829 831 829 828 831 828 830 831 831 830 833 830 832 833 828 834 830 830 834 836
840 838 841 838 839 841 841 839 863 855 857 839 839 857 863 840 841 842 842 841 843 844 842 845
842 843 845 845 843 861 859 861 865 843 865 861 846 844 847 844 845 847 847 845 860 845 861 860
848 846 849 846 847 849 847 860 849 858 864 860 849 860 864 848 849 850 850 849 851 852 850 853
850 851 853 853 851 854 856 854 862 851 862 854 852 853 838 838 853 839 855 854 857 857 854 856
841 851 843 843 851 849 852 838 850 850 838 840 850 840 848 848 840 842 848 842 846 846 842 844
839 853 855 855 853 854 851 841 862 862 841 863 865 843 864 864 843 849 862 863 864 864 863 865
863 857 865 865 857 859 857 856 859 856 858 859 859 858 861 858 860 861 856 862 858 858 862 864
866 867 878 878 867 879 867 868 879 879 868 880 868 869 880 880 869 881 869 870 881 881 870 882
870 871 882 882 871 883 872 884 871 871 884 883 873 885 872 872 885 884 874 886 873 873 886 885
875 887 874 874 887 886 876 888 875 875 888 887 877 889 876 876 889 888 877 866 889 889 866 878
878 879 890 890 879 891 879 880 891 891 880 892 880 881 892 892 881 893 881 882 893 893 882 894
882 883 894 894 883 895 884 896 883 883 896 895 885 897 884 884 897 896 886 898 885 885 898 897
887 899 886 886 899 898 888 900 887 887 900 899 889 901 888 888 901 900 889 878 901 901 878 890
890 891 902 902 891 903 891 892 903 903 892 904 892 893 904 904 893 905 893 894 905 905 894 906
894 895 906 906 895 907 895 896 907 907 896 908 897 909 896 896 909 908 898 910 897 897 910 909
899 911 898 898 911 910 900 912 899 899 912 911 900 901 912 912 901 913 901 890 913 913 890 902
902 903 914 914 903 915 903 904 915 915 904 916 904 905 916 916 905 917 905 906 917 917 906 918
906 907 918 918 907 919 907 908 919 919 908 920 909 921 908 908 921 920 910 922 909 909 922 921
911 923 910 910 923 922 912 924 911 911 924 923 912 913 924 924 913 925 913 902 925 925 902 914
914 915 926 926 915 927 915 916 927 927 916 928 916 917 928 928 917 929 917 918 929 929 918 930
918 919 930 930 919 931 919 920 931 931 920 932 920 921 932 932 921 933 921 922 933 933 922 934
922 923 934 934 923 935 923 924 935 935 924 936 924 925 936 936 925 937 925 914 937 937 914 926
926 927 938 938 927 939 927 928 939 939 928 940 928 929 940 940 929 941 929 930 941 941 930 942
930 931 942 942 931 943 931 932 943 943 932 944 932 933 944 944 933 945 933 934 945 945 934 946
934 935 946 946 935 947 935 936 947 947 936 948 936 937 948 948 937 949 937 926 949 949 926 938
939 951 938 938 951 950 940 952 939 939 952 951 941 953 940 940 953 952 942 954 941 941 954 953
942 943 954 954 943 955 943 944 955 955 944 956 944 945 956 956 945 957 945 946 957 957 946 958
946 947 958 958 947 959 947 948 959 959 948 960 948 949 960 960 949 961 949 938 961 961 938 950
951 963 950 950 963 962 952 964 951 951 964 963 953 965 952 952 965 964 954 966 953 953 966 965
954 955 966 966 955 967 955 956 967 967 956 968 956 957 968 968 957 969 957 958 969 969 958 970
958 959 970 970 959 971 959 960 971 971 960 972 960 961 972 972 961 973 961 950 973 973 950 962
963 975 962 962 975 974 964 976 963 963 976 975 965 977 964 964 977 976 966 978 965 965 978 977
967 979 966 966 979 978 967 968 979 979 968 980 968 969 980 980 969 981 969 970 981 981 970 982
970 971 982 982 971 983 971 972 983 983 972 984 972 973 984 984 973 985 962 974 973 973 974 985
975 987 974 974 987 986 976 988 975 975 988 987 977 989 976 976 989 988 978 990 977 977 990 989
979 991 978 978 991 990 979 980 991 991 980 992 980 981 992 992 981 993 981 982 993 993 982 994
982 983 994 994 983 995 983 984 995 995 984 996 984 985 996 996 985 997 974 986 985 985 986 997
867 866 998 868 867 998 869 868 998 870 869 998 871 870 998 872 871 998 873 872 998 874 873 998
875 874 998 876 875 998 877 876 998 866 877 998 986 987 999 987 988 999 988 989 999 989 990 999
990 991 999 991 992 999 992 993 999 993 994 999 994 995 999 995 996 999 996 997 999 997 986 999'''
city_triangles = [int(i) for i in city_triangles.split()]
create_mesh(city_vertices, city_triangles, mat='flat', process=nophys)


# Create some ships to liven up the stiff, gray city.
shipascii = r'''
  /\
 /XX\
/XXXX\
'''
def create_ship(pos, d):
    pos = vec3(*pos) + rndvec()*20
    za = +pi/2 if d<0 else -pi/2
    vel = vec3(+10 if d<0 else -10,0,0) + rndvec()*1
    return create_ascii_object(shipascii, pos=pos, orientation=quat().rotate_z(za).rotate_x(pi/2), vel=vel)
    return

ships = []
for x in range(-2,3):
    ships += [create_ship((x* 40,40,20), -1)]
    ships += [create_ship((x*250,250,45), -1)]
    ships += [create_ship((x*220,220,25), +1)]
    ships += [create_ship((x*300,300,60), +1)]


# Simplistic semi-transparent triangles to create an illusion of smoke.
# Create the particles as clones to improve speed.
smoke_template = create_mesh([vec3(0,0,2),vec3(-2,0,0),vec3(2,0,0)], [0,1,2], pos=(0,-500,-500), col='#fff1', static=True, process=nophys)
smokes = create_clones(smoke_template, [(vec3(30,115,19)+rndvec()*2,quat().rotate_y(random()*pi*2)) for _ in range(30)], static=True)


while loop():
    try:
        ship = next(shipiter)
        p,v = ship.pos(),ship.vel()
        if abs(p.x)>(abs(p.y)*2+50) and abs(p.x+v.x)>abs(p.x):
            p = p-v.normalize()*abs(p.x)*2
            ship.pos(p)
    except:
        shipiter = iter(ships)

    for s in smokes:
        p = s.pos()
        if p.z < 26:
            p += vec3(0.1,0,0.3)+rndvec()*0.3
        else:
            p = vec3(30,115,19)+rndvec()*2
        s.pos(p)
